/* Tokemoji Market Dashboard / Barometer Section */
@use "../global" as *;

/* iOS WebP Fallback Styles */
.gauge-gif-img,
.dominance-gif-img,
.adoption-gif-img,
.top-gainer-gif-img,
.top-loser-gif-img {
	/* Ensure WebP images maintain transparency and proper sizing */
	background: transparent !important;
	background-color: transparent !important;
	object-fit: contain;
	object-position: center;
	pointer-events: none;
	user-select: none;
	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	
	/* Prevent video-like behavior */
	&:not([src*=".webm"]) {
		/* This applies to WebP fallback images */
		display: block;
		position: relative;
		z-index: 1;
	}
}


#barometer {
	.how-to-buy-section-1 {
		position: relative;
		isolation: isolate;
		@include screen(md) {
			background-image: url(../img/shape/how-to-buy-bg-1.png);
			background-repeat: no-repeat;
			background-size: 100% 100%;
			background-position: center;
		}
	}
}

/* Sort Buttons */
.sort-buttons {
	.sort-btn {
		font-size: 0.7rem;
		padding: 0.25rem 0.5rem;
		border-radius: 0.25rem;
		font-weight: 600;
		transition: all 0.2s ease;
		
		&.active {
			background-color: var(--bs-primary);
			border-color: var(--bs-primary);
			color: white;
		}
		
		&:hover {
			transform: translateY(-1px);
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
		}
	}
}

/* Token List Styles â€” desktop uses grid for strict column alignment */
.token-list {
	.token-row {
		transition: all 0.3s ease;
		display: grid;
		grid-template-columns: 26px 38px 72px 135px 80px 1fr 80px auto;
		align-items: center;
		gap: 0 0.25rem;
		padding: 0.35rem 0.2rem;

		&:hover {
			background-color: rgba(0, 0, 0, 0.02);
			transform: translateX(2px);
		}

		&:last-child {
			border-bottom: none !important;
		}

		.token-rank {
			font-size: 1rem;
		}

		.token-emoji {
			width: 34px;
			height: 34px;
		}

		.token-ticker {
			font-size: 1.05rem;
			line-height: 1.2;
			font-weight: 700;
		}

		.token-price {
			font-size: 0.95rem;
		}

		.token-change {
			font-size: 0.95rem;
			line-height: 1.2;
			font-weight: 700;
		}

		.token-mini-chart {
			width: 100%;
			height: 32px;
		}

		.token-marketcap {
			font-size: 0.9rem;
			text-align: right;
		}

		.buy-btn {
			font-size: 0.7rem;
			padding: 0.25rem 0.7rem;
			border-radius: 0.25rem;
			font-weight: 600;
			transition: all 0.2s ease;
			white-space: nowrap;
			justify-self: end;

			&:hover {
				transform: translateY(-1px);
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
			}
		}

		.chart-btn {
			font-size: 0.7rem;
			padding: 0.2rem 0.5rem;
			border-radius: 0.25rem;
			font-weight: 600;
			transition: all 0.2s ease;

			&:hover {
				transform: translateY(-1px);
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
			}
		}

		.token-chart {
			background: rgba(0, 0, 0, 0.03);
			border: 1px solid rgba(0, 0, 0, 0.1);
			border-radius: 8px;
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);

			canvas {
				border-radius: 4px;
				background: white;
			}
		}
	}
}

/* Market Dominance Styles */
.dominance-gif {
	display: flex;
	align-items: center;
	justify-content: center;
	min-height: 100px;
	
	.dominance-gif-img {
		width: 100px;
		height: 100px;
		object-fit: contain;
		object-position: center;
		display: block;
		margin: 0 auto;
	}
}

.dominance-ticker {
	span {
		font-size: 1.2rem;
		line-height: 1;
		font-weight: bold;
	}
}

.dominance-percentage {
	span {
		font-size: 1.4rem;
		line-height: 1;
		text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
		font-weight: bold;
	}
}

.dominance-bar {
	.progress {
		border-radius: 8px;
		overflow: hidden;
		box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
		
		.progress-bar {
			transition: width 0.5s ease;
			background: linear-gradient(90deg, #ffc107 0%, #ff8c00 100%);
			box-shadow: 0 1px 2px rgba(255, 193, 7, 0.3);
		}
	}
}

/* Gauge Styles */
.gauge-label {
	.gauge-gif {
	.gauge-gif-img {
		width: 60px;
		height: 60px;
		object-fit: contain;
	}
	}
	
	.gauge-text-label {
		font-size: 1.1rem;
		line-height: 1;
		font-weight: bold;
	}
}

/* Make gauge widgets more compact */
.border.rounded-5.bg-light {
	&:has(.gauge-container) {
		min-height: 120px; /* Reduced height for compactness */
		display: flex;
		flex-direction: column;
		justify-content: center;
	}
}

.gauge-container {
	display: flex;
	flex-direction: column;
	align-items: center;
	
	.gauge {
		width: 160px;
		height: 90px;
		transition: all 0.5s ease;
		display: block;
		margin: 0 auto;
		
		path {
			transition: stroke-dashoffset 0.5s ease;
		}
	}
}

.gauge-result {
	font-size: 0.8rem;
	font-weight: 600;
	text-align: center;
	margin-top: 0.5rem;
	color: var(--bs-text-muted);
	line-height: 1.2;
	
	.gauge-ticker {
		display: block;
		font-size: 0.9rem;
		font-weight: 700;
		color: var(--bs-text-heading);
	}
	
	.gauge-dominance {
		display: block;
		font-size: 0.7rem;
		font-weight: 500;
		color: var(--bs-text-muted);
	}
	
	.gauge-percentage {
		display: block;
		font-size: 0.8rem;
		font-weight: 700;
		color: var(--bs-primary);
	}
}

/* News Feed Styles */
.news-feed-single {
	.news-item-single {
		transition: all 0.5s ease;
		
		.news-emoji {
			span {
				font-size: 2rem;
				line-height: 1;
			}
		}
		
		.news-title {
			font-size: 1.3rem;
			line-height: 1.3;
			font-weight: 700;
		}
		
		.news-timestamp {
			font-size: 0.9rem;
		}
	}
}

/* Additional Widgets Styles */
.top-gainers-carousel, .top-losers-carousel {
	.carousel-container {
		display: flex;
		justify-content: center;
		align-items: center;
		gap: 0.3rem;
		position: relative;
		overflow: hidden;
		height: 45px;
		
		.side-gif {
			width: 25px;
			height: 25px;
			object-fit: contain;
			opacity: 0.7;
			transition: all 0.5s ease;
		}
		
		.center-gif {
			width: 35px;
			height: 35px;
			object-fit: contain;
			opacity: 1;
			transition: all 0.5s ease;
			z-index: 2;
		}
	}
}

.adoption-gif {
	.adoption-gif-img {
		width: 40px;
		height: 40px;
		object-fit: contain;
	}
}

.top-gainer-ticker, .top-loser-ticker {
	span {
		font-size: 0.9rem;
		line-height: 1;
	}
}

.top-gainer-change, .top-loser-change {
	span {
		font-size: 1rem;
		line-height: 1;
	}
}

.adoption-percentage {
	span {
		font-size: 1.2rem;
		line-height: 1;
		text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
	}
}

.adoption-bar {
	.progress {
		border-radius: 4px;
		overflow: hidden;
		box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
		
		.progress-bar {
			transition: width 0.5s ease;
			box-shadow: 0 1px 2px rgba(255, 193, 7, 0.3);
		}
	}
}

/* Tablet & mobile: 2-row grid with aligned columns */
@media (max-width: 991.98px) {
	.token-list {
		.token-row {
			grid-template-columns: 26px 34px minmax(55px, auto) 1fr 80px;
			grid-template-rows: auto auto;
			gap: 0.25rem 0.4rem;
			padding: 0.6rem 0.5rem;

			.token-rank {
				grid-column: 1;
				grid-row: 1;
				font-size: 1rem;
			}

			.token-emoji {
				grid-column: 2;
				grid-row: 1;
				width: 32px;
				height: 32px;
			}

			.token-ticker {
				grid-column: 3;
				grid-row: 1;
				font-size: 1rem;
				font-weight: 700;
			}

			.token-price {
				grid-column: 4;
				grid-row: 1;
				font-size: 0.95rem;
				text-align: right;
			}

			.token-change {
				grid-column: 5;
				grid-row: 1;
				font-size: 0.95rem;
				font-weight: 700;
				text-align: right;
			}

			.token-mini-chart {
				grid-column: 1 / 4;
				grid-row: 2;
				width: 100% !important;
				height: 30px !important;
			}

			.token-marketcap {
				grid-column: 4;
				grid-row: 2;
				font-size: 0.9rem;
				text-align: right;
			}

			.buy-btn {
				grid-column: 5;
				grid-row: 2;
				justify-self: end;
				font-size: 0.75rem;
				padding: 0.3rem 0.7rem;
				white-space: nowrap;
			}
		}
	}
}

/* Small phones */
@media (max-width: 575.98px) {
	.token-list {
		.token-row {
			grid-template-columns: 22px 28px minmax(45px, auto) 1fr 65px;
			gap: 0.2rem 0.3rem;
			padding: 0.5rem 0.3rem;

			.token-rank {
				font-size: 0.9rem;
			}

			.token-emoji {
				width: 26px;
				height: 26px;
			}

			.token-ticker {
				font-size: 0.9rem;
			}

			.token-price {
				font-size: 0.8rem;
			}

			.token-change {
				font-size: 0.8rem;
			}

			.token-mini-chart {
				height: 26px !important;
			}

			.token-marketcap {
				font-size: 0.75rem;
			}

			.buy-btn {
				font-size: 0.65rem;
				padding: 0.25rem 0.5rem;
			}
		}
	}

	.dominance-gif {
		min-height: 90px;

		.dominance-gif-img {
			width: 90px;
			height: 90px;
		}
	}

	.dominance-ticker {
		span {
			font-size: 0.9rem;
		}
	}

	.dominance-percentage {
		span {
			font-size: 1rem;
		}
	}

	.gauge-label {
		.gauge-gif {
			.gauge-gif-img {
				width: 35px;
				height: 35px;
			}
		}

		.gauge-text-label {
			font-size: 0.8rem;
		}
	}

	.gauge-container {
		.gauge {
			width: 60px;
			height: 35px;
		}
	}

	.gauge-result {
		font-size: 0.7rem;
		margin-top: 0.25rem;

		.gauge-ticker {
			font-size: 0.8rem;
		}

		.gauge-dominance {
			font-size: 0.6rem;
		}

		.gauge-percentage {
			font-size: 0.7rem;
		}
	}

	.top-gainers-carousel, .top-losers-carousel {
		.carousel-container {
			height: 45px;

			.side-gif {
				width: 30px;
				height: 30px;
			}

			.center-gif {
				width: 35px;
				height: 35px;
			}
		}
	}

	.adoption-gif {
		.adoption-gif-img {
			width: 45px;
			height: 45px;
		}
	}
}

/* Desktop */
@include screen(lg) {
	.dominance-percentage {
		span {
			font-size: 1.1rem;
		}
	}

	.dominance-gif {
		min-height: 120px;

		.dominance-gif-img {
			width: 120px;
			height: 120px;
		}
	}

	.gauge-container {
		.gauge {
			width: 140px;
			height: 70px;
		}
	}

	.gauge-label {
		.gauge-gif {
			.gauge-gif-img {
				width: 80px;
				height: 80px;
			}
		}

		.gauge-text-label {
			font-size: 1.2rem;
		}
	}
}

/* Tablet widget overrides */
@media (min-width: 768px) and (max-width: 991.98px) {
	.sort-buttons {
		.sort-btn {
			font-size: 0.6rem;
			padding: 0.2rem 0.4rem;
		}
	}

	.dominance-percentage {
		span {
			font-size: 1rem;
		}
	}

	.dominance-ticker {
		span {
			font-size: 0.9rem;
		}
	}

	.gauge-container {
		.gauge {
			width: 60px;
			height: 30px;
		}
	}

	.news-feed-single {
		.news-item-single {
			.news-title {
				font-size: 1.1rem;
			}
		}
	}
}

/* PumpPortal Live Indicator */
.live-indicator {
	display: inline-flex;
	align-items: center;
	gap: 4px;
	font-size: 0.6rem;
	font-weight: 700;
	letter-spacing: 0.05em;
	padding: 2px 8px;
	border-radius: 10px;
	text-transform: uppercase;
	vertical-align: middle;
	transition: all 0.3s ease;

	&.connected {
		background: rgba(40, 167, 69, 0.15);
		color: #28a745;
	}

	&.disconnected {
		background: rgba(220, 53, 69, 0.15);
		color: #dc3545;
	}
}

.live-dot {
	width: 6px;
	height: 6px;
	border-radius: 50%;
	background: currentColor;
	display: inline-block;
	transition: all 0.2s ease;

	.connected & {
		background: #28a745;
		box-shadow: 0 0 4px #28a745;
	}

	.disconnected & {
		background: #dc3545;
	}

	&.pulse {
		animation: dotPulse 0.6s ease-out;
	}
}

@keyframes dotPulse {
	0% { transform: scale(1); box-shadow: 0 0 0 0 currentColor; }
	50% { transform: scale(1.8); box-shadow: 0 0 8px currentColor; }
	100% { transform: scale(1); box-shadow: 0 0 4px currentColor; }
}

.live-last-trade {
	font-size: 0.65rem;
	font-weight: 600;
	letter-spacing: 0.03em;
	white-space: nowrap;
	transition: color 0.2s ease;
}

.live-counter {
	font-size: 0.6rem;
	padding: 2px 6px;
	min-width: 24px;
	text-align: center;
}

/* Trade Flash Effects */
.token-row.trade-flash-buy {
	animation: flashBuy 22s ease-out;
}

.token-row.trade-flash-sell {
	animation: flashSell 22s ease-out;
}

@keyframes flashBuy {
	0% { background-color: rgba(40, 167, 69, 0.35); }
	60% { background-color: rgba(40, 167, 69, 0.25); }
	91% { background-color: rgba(40, 167, 69, 0.08); }
	100% { background-color: transparent; }
}

@keyframes flashSell {
	0% { background-color: rgba(220, 53, 69, 0.35); }
	60% { background-color: rgba(220, 53, 69, 0.25); }
	91% { background-color: rgba(220, 53, 69, 0.08); }
	100% { background-color: transparent; }
}

/* Gauge Flash Effects */
.gauge-flash-positive {
	animation: gaugeFlashPositive 3s ease-out;
}

.gauge-flash-negative {
	animation: gaugeFlashNegative 3s ease-out;
}

@keyframes gaugeFlashPositive {
	0% { background-color: rgba(40, 167, 69, 0.3); }
	20% { background-color: rgba(40, 167, 69, 0.25); }
	40% { background-color: rgba(40, 167, 69, 0.15); }
	60% { background-color: rgba(40, 167, 69, 0.08); }
	80% { background-color: rgba(40, 167, 69, 0.03); }
	100% { background-color: transparent; }
}

@keyframes gaugeFlashNegative {
	0% { background-color: rgba(220, 53, 69, 0.3); }
	20% { background-color: rgba(220, 53, 69, 0.25); }
	40% { background-color: rgba(220, 53, 69, 0.15); }
	60% { background-color: rgba(220, 53, 69, 0.08); }
	80% { background-color: rgba(220, 53, 69, 0.03); }
	100% { background-color: transparent; }
}

/* Per-side gauge label flash */
.gauge-label {
	border-radius: 8px;
	transition: background-color 1.5s ease-out;
}

@keyframes gaugeSideGreen {
	0% { background-color: rgba(40, 167, 69, 0.35); }
	30% { background-color: rgba(40, 167, 69, 0.2); }
	100% { background-color: transparent; }
}

@keyframes gaugeSideRed {
	0% { background-color: rgba(220, 53, 69, 0.35); }
	30% { background-color: rgba(220, 53, 69, 0.2); }
	100% { background-color: transparent; }
}

.gauge-label.gauge-side-gaining {
	animation: gaugeSideGreen 5s ease-out forwards;
}

.gauge-label.gauge-side-losing {
	animation: gaugeSideRed 5s ease-out forwards;
}

/* Animation Enhancements */
@keyframes pulse {
	0% {
		transform: scale(1);
	}
	50% {
		transform: scale(1.05);
	}
	100% {
		transform: scale(1);
	}
}

.token-row:hover .token-emoji {
	animation: pulse 0.6s ease-in-out;
}

.news-item:hover .news-emoji {
	animation: pulse 0.4s ease-in-out;
}

/* Loading States */
.token-list.loading,
.news-feed.loading {
	opacity: 0.6;
	pointer-events: none;
}

/* Success/Error States */
.token-change.text-success {
	color: #28a745 !important;
}

.token-change.text-danger {
	color: #dc3545 !important;
}

/* Custom Scrollbar for Webkit browsers */
.news-feed {
	scrollbar-width: thin;
	scrollbar-color: #888 #f1f1f1;
}


// Ticker container responsive adjustments
.ticker-container {
	// Mobile adjustments
	@media (max-width: 767.98px) {
		margin-top: -20px !important; // Reduce overlap on mobile
		padding-bottom: 10px !important; // Reduce bottom padding
	}
	
	// Extra small screens
	@media (max-width: 575.98px) {
		margin-top: 0px !important; // No overlap on very small screens
		padding-bottom: 5px !important;
	}
}

/* Tokenomics GIF Responsive Sizing */
.tokenomics-gif {
	// Default desktop size
	max-width: 580px;
	
	// Large screens (1200px and up)
	@media (min-width: 1200px) {
		max-width: 580px;
	}
	
	// Medium screens (992px to 1199px)
	@media (max-width: 1199.98px) {
		max-width: 500px;
	}
	
	// Small screens (768px to 991px)
	@media (max-width: 991.98px) {
		max-width: 400px;
	}
	
	// Extra small screens (576px to 767px)
	@media (max-width: 767.98px) {
		max-width: 400px;
	}
	
	// Mobile screens (below 576px)
	@media (max-width: 575.98px) {
		max-width: 350px;
	}
	
	// Very small mobile screens (below 400px)
	@media (max-width: 399.98px) {
		max-width: 300px;
	}
}
